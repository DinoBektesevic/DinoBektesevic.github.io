<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.8.1"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <title> CSE 512 A3 </title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="main.css">
        <style>
         .error {
             color: red;
         }
        </style>
    </head>
    <body>
        <div class="container">
            <!--
                 This is the title, names and a placeholder for potential brief description of our work.
            -->
            <h1 class="text-center">Data Visualization CSE 512 A3</h1>
            <p class="text-center font-weight-bold">David Wang, Jessica Birky, Conor Sayer, Dino Bektesevic</p>

            <!--
                 This is the meat of the content, our paragraphs, and the plot.
	               There are two rows and two columns on the page. First row first column is intro, second is rationality.
	               The rows and columns in the second row are set to resize according to content. Titles are h and paragraphs are p tags.
            -->

            <div class="row">
	              <div class="col">
                    <h2>Introduction</h2>
                    <p class="text-justify">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                </div>
	              <div class="col">
                    <h2>Rationality</h2>
                    <p class="text-justify">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <h2>How-to</h2>
                    <p class="text-justify">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
	                  <h2>Another title</h2>
                    <p class="text-justify">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    <select name="night-data" id="night-data">
                        <option value="altair_polished.json">Data1</option>
                        <option value="altair_polished2.json">Data2</option>
                    </select>
                </div>
                <div class="col">
                    <!-- This is where the plot goes, identified by the div ID  -->
                    <div id="vis" class="d-flex justify-content-center"></div>
                </div>
            </div>

        </div>
        <!--
             Include your plot scripts here!
             It would be nice if your plots could target a specific, pre-existing
             SVG element (above). This way we can have control over the layout.
             It would be nice if they were plotted when a function is called
             so that we can ensure the DOM Content is fully loaded before we start
             drawing.
        -->
        <script>
         async function getData(file){
             const data = await $.getJSON(file);
             return data;
         }

         async function replot(vegaEmbed, file) {
             let spec = await getData(file)

             var embedOpt = {"mode": "vega-lite"};

             function showError(el, error){
                 el.innerHTML = ('<div class="error" style="color:red;">'
                               + '<p>JavaScript Error: ' + error.message + '</p>'
                               + "<p>This usually means there's a typo in your chart specification. "
                               + "See the javascript console for the full traceback.</p>"
                               + '</div>');
                 throw error;
             }
             const el = document.getElementById('vis');
             vegaEmbed("#vis", spec, embedOpt)
                 .catch(error => showError(el, error));
         }

         replot(vegaEmbed, "altair_polished.json");

         document.getElementById('night-data').addEventListener('change', function() {
             replot(vegaEmbed, this.value);
         });

        </script>
    </body>
</html>
